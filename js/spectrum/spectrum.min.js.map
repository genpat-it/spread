{"version":3,"file":"spectrum.min.js","mappings":"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","sources":["webpack://Spectrum/webpack/universalModuleDefinition","webpack://Spectrum/webpack/bootstrap","webpack://Spectrum/webpack/runtime/define property getters","webpack://Spectrum/webpack/runtime/hasOwnProperty shorthand","webpack://Spectrum/./node_modules/tinycolor2/esm/tinycolor.js","webpack://Spectrum/./src/dom.ts","webpack://Spectrum/./src/utils.ts","webpack://Spectrum/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Spectrum\"] = factory();\n\telse\n\t\troot[\"Spectrum\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// This file is autogenerated. It's used to publish ESM to npm.\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nconst trimLeft = /^\\s+/;\nconst trimRight = /\\s+$/;\n\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n\n  var rgb = inputToRGB(color);\n  (this._originalInput = color),\n    (this._r = rgb.r),\n    (this._g = rgb.g),\n    (this._b = rgb.b),\n    (this._a = rgb.a),\n    (this._roundA = Math.round(100 * this._a) / 100),\n    (this._format = opts.format || rgb.format);\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n\n  this._ok = rgb.ok;\n}\n\ntinycolor.prototype = {\n  isDark: function () {\n    return this.getBrightness() < 128;\n  },\n  isLight: function () {\n    return !this.isDark();\n  },\n  isValid: function () {\n    return this._ok;\n  },\n  getOriginalInput: function () {\n    return this._originalInput;\n  },\n  getFormat: function () {\n    return this._format;\n  },\n  getAlpha: function () {\n    return this._a;\n  },\n  getBrightness: function () {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function () {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;\n    else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;\n    else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;\n    else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function (value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n  },\n  toHsvString: function () {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1\n      ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\"\n      : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n  },\n  toHslString: function () {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1\n      ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\"\n      : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function (allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function (allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function (allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function (allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function () {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a,\n    };\n  },\n  toRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \")\"\n      : \"rgba(\" +\n          Math.round(this._r) +\n          \", \" +\n          Math.round(this._g) +\n          \", \" +\n          Math.round(this._b) +\n          \", \" +\n          this._roundA +\n          \")\";\n  },\n  toPercentageRgb: function () {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a,\n    };\n  },\n  toPercentageRgbString: function () {\n    return this._a == 1\n      ? \"rgb(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%)\"\n      : \"rgba(\" +\n          Math.round(bound01(this._r, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._g, 255) * 100) +\n          \"%, \" +\n          Math.round(bound01(this._b, 255) * 100) +\n          \"%, \" +\n          this._roundA +\n          \")\";\n  },\n  toName: function () {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n\n    if (this._a < 1) {\n      return false;\n    }\n\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function (secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n\n    return (\n      \"progid:DXImageTransform.Microsoft.gradient(\" +\n      gradientType +\n      \"startColorstr=\" +\n      hex8String +\n      \",endColorstr=\" +\n      secondHex8String +\n      \")\"\n    );\n  },\n  toString: function (format) {\n    var formatSet = !!format;\n    format = format || this._format;\n\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat =\n      !formatSet &&\n      hasAlpha &&\n      (format === \"hex\" ||\n        format === \"hex6\" ||\n        format === \"hex3\" ||\n        format === \"hex4\" ||\n        format === \"hex8\" ||\n        format === \"name\");\n\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n\n    return formattedString || this.toHexString();\n  },\n  clone: function () {\n    return tinycolor(this.toString());\n  },\n\n  _applyModification: function (fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function () {\n    return this._applyModification(lighten, arguments);\n  },\n  brighten: function () {\n    return this._applyModification(brighten, arguments);\n  },\n  darken: function () {\n    return this._applyModification(darken, arguments);\n  },\n  desaturate: function () {\n    return this._applyModification(desaturate, arguments);\n  },\n  saturate: function () {\n    return this._applyModification(saturate, arguments);\n  },\n  greyscale: function () {\n    return this._applyModification(greyscale, arguments);\n  },\n  spin: function () {\n    return this._applyModification(spin, arguments);\n  },\n\n  _applyCombination: function (fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function () {\n    return this._applyCombination(analogous, arguments);\n  },\n  complement: function () {\n    return this._applyCombination(complement, arguments);\n  },\n  monochromatic: function () {\n    return this._applyCombination(monochromatic, arguments);\n  },\n  splitcomplement: function () {\n    return this._applyCombination(splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function () {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function () {\n    return this._applyCombination(polyad, [4]);\n  },\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (typeof color == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = { r: 0, g: 0, b: 0 };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n\n  if (typeof color == \"object\") {\n    if (\n      isValidCSSUnit(color.r) &&\n      isValidCSSUnit(color.g) &&\n      isValidCSSUnit(color.b)\n    ) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.v)\n    ) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (\n      isValidCSSUnit(color.h) &&\n      isValidCSSUnit(color.s) &&\n      isValidCSSUnit(color.l)\n    ) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n\n  a = boundAlpha(a);\n\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a,\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255,\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n\n  return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  // Return a 3 character hex if possible\n  if (\n    allow3Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1)\n  ) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n    pad2(convertDecimalToHex(a)),\n  ];\n\n  // Return a 4 character hex if possible\n  if (\n    allow4Char &&\n    hex[0].charAt(0) == hex[0].charAt(1) &&\n    hex[1].charAt(0) == hex[1].charAt(1) &&\n    hex[2].charAt(0) == hex[2].charAt(1) &&\n    hex[3].charAt(0) == hex[3].charAt(1)\n  ) {\n    return (\n      hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0)\n    );\n  }\n\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [\n    pad2(convertDecimalToHex(a)),\n    pad2(Math.round(r).toString(16)),\n    pad2(Math.round(g).toString(16)),\n    pad2(Math.round(b).toString(16)),\n  ];\n\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random(),\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\n\nfunction lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\n\nfunction darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\n\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({ h: (hsl.h + i * step) % 360, s: hsl.s, l: hsl.l }));\n  }\n\n  return result;\n}\n\nfunction splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [\n    tinycolor(color),\n    tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n    tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n  ];\n}\n\nfunction analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n\n  for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results; ) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\n\nfunction monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n\n  while (results--) {\n    ret.push(tinycolor({ h: h, s: s, v: v }));\n    v = (v + modification) % 1;\n  }\n\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n\n  var p = amount / 100;\n\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a,\n  };\n\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (\n    (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) /\n    (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05)\n  );\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n\n  out = false;\n\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n\n  if (\n    tinycolor.isReadable(baseColor, bestColor, {\n      level: level,\n      size: size,\n    }) ||\n    !includeFallbackColors\n  ) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = (tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\",\n});\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = (tinycolor.hexNames = flip(names));\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\n\nvar matchers = (function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 =\n    \"[\\\\s|\\\\(]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")[,|\\\\s]+(\" +\n    CSS_UNIT +\n    \")\\\\s*\\\\)?\";\n\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n  };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if ((match = matchers.rgb.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3] };\n  }\n  if ((match = matchers.rgba.exec(color))) {\n    return { r: match[1], g: match[2], b: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsl.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3] };\n  }\n  if ((match = matchers.hsla.exec(color))) {\n    return { h: match[1], s: match[2], l: match[3], a: match[4] };\n  }\n  if ((match = matchers.hsv.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3] };\n  }\n  if ((match = matchers.hsva.exec(color))) {\n    return { h: match[1], s: match[2], v: match[3], a: match[4] };\n  }\n  if ((match = matchers.hex8.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex6.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n  if ((match = matchers.hex4.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\",\n    };\n  }\n  if ((match = matchers.hex3.exec(color))) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\",\n    };\n  }\n\n  return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || { level: \"AA\", size: \"small\" };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return { level: level, size: size };\n}\n\nexport { tinycolor as default };\n","/**\n * Part of spectrum-vanilla project.\n *\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nexport function insertAfter<T extends Element>(existingNode: T, newNode: Element): T {\n  existingNode.parentNode?.insertBefore(newNode, existingNode.nextSibling);\n  return existingNode;\n}\n\nexport function insertBefore<T extends Element>(existingNode: T, newNode: Element): T {\n  existingNode.parentNode?.insertBefore(newNode, existingNode);\n  return existingNode;\n}\n\nexport function wrap<T extends Element>(ele: T, wrapper: Element): T {\n  ele.replaceWith(wrapper);\n  wrapper.appendChild(ele);\n  return ele;\n}\n\nexport function outerWidthWithMargin(ele: HTMLElement) {\n  const style = window.getComputedStyle(ele);\n\n  return (\n    ele.getBoundingClientRect().width +\n    parseFloat(style.marginLeft) +\n    parseFloat(style.marginRight)\n  );\n}\n","/**\n * Part of spectrum-vanilla project.\n *\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nexport function html(html: string, doc = document) {\n  const div = doc.createElement('div');\n  div.innerHTML = html;\n  return div.children[0];\n}\n\nexport function camelize(str: string): string {\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (word, index) {\n    return index === 0 ? word.toLowerCase() : word.toUpperCase();\n  }).replace(/\\s+/g, '');\n}\n\nexport function throttle(func: Function, wait: number, debounce: Function | undefined = undefined) {\n  let timeout: any;\n  return function () {\n    // @ts-ignore\n    const context = this, args = arguments;\n    const throttler = function () {\n      timeout = null;\n      func.apply(context, args);\n    };\n    if (debounce) clearTimeout(timeout);\n    if (debounce || !timeout) {\n      timeout = setTimeout(throttler, wait);\n    }\n  };\n}\n\nexport function addClass(ele: HTMLElement, className: string) {\n  const classes = className.split(' ').filter((c) => c !== '');\n\n  if (className !== '' && classes.length) {\n    ele.classList.add(...classes);\n  }\n  return ele;\n}\n\nexport function removeClass(ele: HTMLElement, className: string) {\n  const classes = className.split(' ').filter((c) => c !== '');\n  if (className !== '' && classes.length) {\n    ele.classList.remove(...classes);\n  }\n  return ele;\n}\n\nexport function toggleClass(\n  ele: HTMLElement,\n  className: string,\n  state: boolean | undefined = undefined\n) {\n  if (state != undefined) {\n    ele.classList.toggle(className, state);\n  } else if (state === true) {\n    addClass(ele, className);\n  } else {\n    removeClass(ele, className);\n  }\n  return ele;\n}\n\nexport function emit(ele: EventTarget, eventName: string, detail: any = {}) {\n  const event = new CustomEvent(\n    eventName,\n    {\n      cancelable: true,\n      bubbles: true,\n      detail,\n    },\n  );\n\n  ele.dispatchEvent(event);\n\n  return event;\n}\n\nexport function eventDelegate(\n  ele: HTMLElement,\n  eventName: string,\n  selector: string,\n  listener: Function,\n  payload: { [name: string]: any } = {},\n) {\n  ele.addEventListener(eventName, (e) => {\n    if ((e.target as Element).closest(selector)) {\n      // @ts-ignore\n      e.data = Object.assign({}, e.data || {}, payload);\n\n      listener(e);\n    }\n  }, payload);\n}\n\nexport type OffsetCSSOptions = { top?: number, bottom?: number, left?: number, right?: number, using?: Function };\n\nexport function setElementOffset(\n  elem: HTMLElement,\n  options: OffsetCSSOptions,\n) {\n  let curPosition;\n  let curTop;\n  let curLeft;\n  let calculatePosition;\n  let position = elem.style.position;\n  let curElem = elem;\n  let props: OffsetCSSOptions = {};\n\n  // Set position first, in-case top/left are set even on static elem\n  if (position === \"static\") {\n    elem.style.position = \"relative\";\n  }\n\n  let curOffset = getElementOffset(curElem);\n  let curCSSTop = elem.style.top;\n  let curCSSLeft = elem.style.left;\n  calculatePosition = (position === \"absolute\" || position === \"fixed\") &&\n    (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1;\n\n  // Need to be able to calculate position if either\n  // top or left is auto and position is either absolute or fixed\n  if (calculatePosition) {\n    curPosition = getElementPosition(curElem);\n    curTop = curPosition.top;\n    curLeft = curPosition.left;\n\n  } else {\n    curTop = parseFloat(curCSSTop) || 0;\n    curLeft = parseFloat(curCSSLeft) || 0;\n  }\n\n  // if (typeof options === 'function') {\n  //   options = options.call(elem, Object.assign({}, curOffset)) as OffsetCSSOptions;\n  // }\n\n  if (options.top != null) {\n    props.top = (options.top - curOffset.top) + curTop;\n  }\n  if (options.left != null) {\n    props.left = (options.left - curOffset.left) + curLeft;\n  }\n  \n  if (\"using\" in options) {\n    options.using.call(elem, props);\n  } else {\n    for (const k in props) {\n      curElem.style[k] = props[k] + 'px';\n    }\n  }\n}\n\nexport function getElementOffset(el: HTMLElement) {\n  const box = el.getBoundingClientRect();\n  const docElem = document.documentElement;\n  return {\n    top: box.top + window.pageYOffset - docElem.clientTop,\n    left: box.left + window.pageXOffset - docElem.clientLeft,\n  };\n}\n\nexport function getElementPosition(el: HTMLElement) {\n  const { top, left } = el.getBoundingClientRect();\n  const { marginTop, marginLeft } = getComputedStyle(el);\n  return {\n    top: top - parseInt(marginTop, 10),\n    left: left - parseInt(marginLeft, 10),\n  };\n}\n","import tinycolor, { ColorInput, Instance } from 'tinycolor2';\nimport { insertAfter, outerWidthWithMargin, wrap } from './dom';\nimport { SpectrumColorFormat, SpectrumOptions, SpectrumLang, SpectrumListener } from './types';\nimport {\n  addClass,\n  emit,\n  eventDelegate,\n  getElementOffset,\n  html,\n  OffsetCSSOptions,\n  removeClass,\n  setElementOffset,\n  throttle,\n  toggleClass,\n} from './utils';\n\nconst defaultOpts: Partial<SpectrumOptions> = {\n\n    // Callbacks\n    beforeShow: noop,\n    move: noop,\n    change: noop,\n    show: noop,\n    hide: noop,\n\n    // Options\n    color: '',\n    type: 'component', // text, color, component or flat\n    showInput: false,\n    allowEmpty: true,\n    showButtons: true,\n    clickoutFiresChange: true,\n    showInitial: false,\n    showPalette: true,\n    showPaletteOnly: false,\n    hideAfterPaletteSelect: false,\n    togglePaletteOnly: false,\n    showSelectionPalette: true,\n    localStorageKey: '',\n    appendTo: 'body',\n    maxSelectionSize: 8,\n    locale: 'en',\n    cancelText: 'cancel',\n    chooseText: 'choose',\n    togglePaletteMoreText: 'more',\n    togglePaletteLessText: 'less',\n    clearText: 'Clear Color Selection',\n    noColorSelectedText: 'No Color Selected',\n    preferredFormat: 'name',\n    containerClassName: '',\n    replacerClassName: '',\n    showAlpha: true,\n    theme: 'sp-light',\n    palette: [\n      ['#000000', '#444444', '#5b5b5b', '#999999', '#bcbcbc', '#eeeeee', '#f3f6f4', '#ffffff'],\n      ['#f44336', '#744700', '#ce7e00', '#8fce00', '#2986cc', '#16537e', '#6a329f', '#c90076'],\n      ['#f4cccc', '#fce5cd', '#fff2cc', '#d9ead3', '#d0e0e3', '#cfe2f3', '#d9d2e9', '#ead1dc'],\n      ['#ea9999', '#f9cb9c', '#ffe599', '#b6d7a8', '#a2c4c9', '#9fc5e8', '#b4a7d6', '#d5a6bd'],\n      ['#e06666', '#f6b26b', '#ffd966', '#93c47d', '#76a5af', '#6fa8dc', '#8e7cc3', '#c27ba0'],\n      ['#cc0000', '#e69138', '#f1c232', '#6aa84f', '#45818e', '#3d85c6', '#674ea7', '#a64d79'],\n      ['#990000', '#b45f06', '#bf9000', '#38761d', '#134f5c', '#0b5394', '#351c75', '#741b47'],\n      ['#660000', '#783f04', '#7f6000', '#274e13', '#0c343d', '#073763', '#20124d', '#4c1130'],\n    ],\n    selectionPalette: [] as string[],\n    disabled: false,\n    offset: null,\n  },\n  spectrums: any[] = [],\n  replaceInput = html(\n    [\n      '<div class=\\'sp-replacer\\'>',\n      '<div class=\\'sp-preview\\'><div class=\\'sp-preview-inner\\'></div></div>',\n      '<div class=\\'sp-dd\\'>&#9660;</div>',\n      '</div>',\n    ].join(''),\n  ) as HTMLElement,\n  markup = (function () {\n    return [\n      '<div class=\\'sp-container sp-hidden\\'>',\n      '<div class=\\'sp-palette-container\\'>',\n      '<div class=\\'sp-palette sp-thumb sp-cf\\'></div>',\n      '<div class=\\'sp-palette-button-container sp-cf\\'>',\n      '<button type=\\'button\\' class=\\'sp-palette-toggle\\'></button>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-picker-container\\'>',\n      '<div class=\\'sp-top sp-cf\\'>',\n      '<div class=\\'sp-fill\\'></div>',\n      '<div class=\\'sp-top-inner\\'>',\n      '<div class=\\'sp-color\\'>',\n      '<div class=\\'sp-sat\\'>',\n      '<div class=\\'sp-val\\'>',\n      '<div class=\\'sp-dragger\\'></div>',\n      '</div>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-clear sp-clear-display\\'>',\n      '</div>',\n      '<div class=\\'sp-hue\\'>',\n      '<div class=\\'sp-slider\\'></div>',\n      '</div>',\n      '</div>',\n      '<div class=\\'sp-alpha\\'><div class=\\'sp-alpha-inner\\'><div class=\\'sp-alpha-handle\\'></div></div></div>',\n      '</div>',\n      '<div class=\\'sp-input-container sp-cf\\'>',\n      '<input class=\\'sp-input\\' type=\\'text\\' spellcheck=\\'false\\'  />',\n      '</div>',\n      '<div class=\\'sp-initial sp-thumb sp-cf\\'></div>',\n      '<div class=\\'sp-button-container sp-cf\\'>',\n      '<button class=\\'sp-cancel\\' href=\\'#\\'></button>',\n      '<button type=\\'button\\' class=\\'sp-choose\\'></button>',\n      '</div>',\n      '</div>',\n      '</div>',\n    ].join('');\n  })();\n\nfunction paletteTemplate(p: ColorInput[], color: ColorInput, className: string, opts: any) {\n  const html = [];\n  for (let i = 0; i < p.length; i++) {\n    const current = p[i];\n    if (current) {\n      const tiny = tinycolor(current);\n      let c = tiny.toHsl().l < 0.5 ? 'sp-thumb-el sp-thumb-dark' : 'sp-thumb-el sp-thumb-light';\n      c += (tinycolor.equals(color, current)) ? ' sp-thumb-active' : '';\n      const formattedString = tiny.toString(opts.preferredFormat || 'rgb');\n      const swatchStyle = 'background-color:' + tiny.toRgbString();\n      html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\"></span></span>');\n    } else {\n      html.push('<span class=\"sp-thumb-el sp-clear-display\" ><span class=\"sp-clear-palette-only\" style=\"background-color: transparent;\"></span></span>');\n    }\n  }\n  return '<div class=\\'sp-cf ' + className + '\\'>' + html.join('') + '</div>';\n}\n\nfunction hideAll() {\n  for (let i = 0; i < spectrums.length; i++) {\n    if (spectrums[i]) {\n      spectrums[i].hide();\n    }\n  }\n}\n\nfunction instanceOptions(options: Partial<SpectrumOptions>, element: HTMLElement): SpectrumOptions {\n  // Clone first\n  options = Object.assign({}, options);\n\n  options.locale = options.locale || window.navigator.language;\n\n  if (typeof options.locale === 'string') {\n    if (options.locale) {\n      // handle locale like \"zh-TW\" to \"zh-tw\"\n      // handle locale like \"fr-FR\" to \"fr\"\n      let parts = options.locale.split('-')\n        .map((p) => p.toLowerCase());\n\n      if (parts[0] === parts[1]) {\n        parts = [parts[0]];\n      }\n\n      options.locale = parts.join('-');\n    }\n\n    if (options.locale !== 'en' && Spectrum.localization[options.locale]) {\n      options = Object.assign({}, options, Spectrum.localization[options.locale]);\n    }\n  } else {\n    options = Object.assign({}, options, options.locale);\n  }\n\n  const opts = Object.assign({}, defaultOpts, element.dataset, options) as SpectrumOptions;\n\n  opts.callbacks = {\n    'move': bind(opts.move as Function, element),\n    'change': bind(opts.change as Function, element),\n    'show': bind(opts.show as Function, element),\n    'hide': bind(opts.hide as Function, element),\n    'beforeShow': bind(opts.beforeShow as Function, element),\n  };\n\n  return opts;\n}\n\nfunction spectrum(element: HTMLElement, options: Partial<SpectrumOptions>) {\n\n  let opts = instanceOptions(options, element),\n    type = opts.type,\n    flat = (type === 'flat'),\n    showSelectionPalette = opts.showSelectionPalette,\n    localStorageKey = opts.localStorageKey,\n    theme = opts.theme,\n    callbacks = opts.callbacks,\n    resize = throttle(reflow, 10),\n    visible = false,\n    isDragging = false,\n    dragWidth = 0,\n    dragHeight = 0,\n    dragHelperHeight = 0,\n    slideHeight = 0,\n    slideWidth = 0,\n    alphaWidth = 0,\n    alphaSlideHelperWidth = 0,\n    slideHelperHeight = 0,\n    currentHue = 0,\n    currentSaturation = 0,\n    currentValue = 0,\n    currentAlpha = 1,\n    palette: any = [],\n    paletteArray: any[] = [],\n    paletteLookup: any = {},\n    selectionPalette = opts.selectionPalette.slice(0),\n    maxSelectionSize = opts.maxSelectionSize,\n    draggingClass = 'sp-dragging',\n    abortNextInputChange = false,\n    shiftMovementDirection: any = null;\n\n  const doc = element.ownerDocument;\n\n  const container = html(markup, doc) as HTMLElement;\n  container.classList.add(theme);\n  doc.body.appendChild(container);\n\n  let body = doc.body,\n    boundElement: HTMLElement | HTMLInputElement = element,\n    disabled = false,\n    pickerContainer = container.querySelector('.sp-picker-container') as HTMLElement,\n    dragger = container.querySelector('.sp-color') as HTMLElement,\n    dragHelper = container.querySelector('.sp-dragger') as HTMLElement,\n    slider = container.querySelector('.sp-hue') as HTMLElement,\n    slideHelper = container.querySelector('.sp-slider') as HTMLElement,\n    alphaSliderInner = container.querySelector('.sp-alpha-inner') as HTMLElement,\n    alphaSlider = container.querySelector('.sp-alpha') as HTMLElement,\n    alphaSlideHelper = container.querySelector('.sp-alpha-handle') as HTMLElement,\n    textInput = container.querySelector('.sp-input') as HTMLInputElement,\n    paletteContainer = container.querySelector('.sp-palette') as HTMLElement,\n    initialColorContainer = container.querySelector('.sp-initial') as HTMLElement,\n    cancelButton = container.querySelector('.sp-cancel') as HTMLElement,\n    clearButton = container.querySelector('.sp-clear') as HTMLElement,\n    chooseButton = container.querySelector('.sp-choose') as HTMLElement,\n    toggleButton = container.querySelector('.sp-palette-toggle') as HTMLElement,\n    isInput = boundElement.nodeName === 'INPUT',\n    isInputTypeColor = isInput && boundElement.getAttribute('type') === 'color',\n    shouldReplace = isInput && (type === 'color' || isInputTypeColor),\n    replacer = (shouldReplace)\n      ? (() => {\n        addClass(replaceInput, theme);\n        addClass(replaceInput, opts.replacerClassName);\n        return replaceInput;\n      })()\n      : null,\n    offsetElement = (shouldReplace) ? replacer : boundElement,\n    previewElement = replacer?.querySelector('.sp-preview-inner') as HTMLElement,\n    initialColor = opts.color || (isInput && (boundElement as HTMLInputElement).value),\n    colorOnShow: ColorInput = '',\n    currentPreferredFormat = opts.preferredFormat,\n    clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\n    isEmpty = !initialColor,\n    allowEmpty = opts.allowEmpty;\n\n  // Element to be updated with the input color. Populated in initialize method\n  let originalInputContainer: HTMLSpanElement;\n  let colorizeElement: HTMLElement | null;\n  let colorizeElementInitialColor: string;\n  let colorizeElementInitialBackground: string;\n\n  //If there is a label for this element, when clicked on, show the colour picker\n  const thisId = boundElement.getAttribute('id') || '';\n  if (thisId !== undefined && thisId.length > 0) {\n    const labels = document.querySelectorAll(`label[for=\"${thisId}\"]`);\n\n    labels.forEach((label) => {\n      label.addEventListener('click', function (e) {\n        e.preventDefault();\n        show();\n        return false;\n      });\n    });\n  }\n\n  function applyOptions() {\n\n    if (opts.showPaletteOnly) {\n      opts.showPalette = true;\n    }\n\n    if (toggleButton) {\n      toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\n    }\n\n    if (opts.palette) {\n      palette = opts.palette.slice(0);\n      paletteArray = Array.isArray(palette[0]) ? palette : [palette];\n      paletteLookup = {};\n      for (let i = 0; i < paletteArray.length; i++) {\n        for (let j = 0; j < paletteArray[i].length; j++) {\n          const rgb = tinycolor(paletteArray[i][j]).toRgbString();\n          paletteLookup[rgb] = true;\n        }\n      }\n\n      // if showPaletteOnly and didn't set initialcolor\n      // set initialcolor to first palette\n      if (opts.showPaletteOnly && !initialColor) {\n        initialColor = (palette[0][0] === '') ? palette[0][0] : Object.keys(paletteLookup)[0];\n      }\n    }\n\n    toggleClass(container, 'sp-flat', flat);\n    toggleClass(container, 'sp-input-disabled', !opts.showInput);\n    toggleClass(container, 'sp-alpha-enabled', opts.showAlpha);\n    toggleClass(container, 'sp-clear-enabled', allowEmpty);\n    toggleClass(container, 'sp-buttons-disabled', !opts.showButtons);\n    toggleClass(container, 'sp-palette-buttons-disabled', !opts.togglePaletteOnly);\n    toggleClass(container, 'sp-palette-disabled', !opts.showPalette);\n    toggleClass(container, 'sp-palette-only', opts.showPaletteOnly);\n    toggleClass(container, 'sp-initial-disabled', !opts.showInitial);\n    addClass(container, opts.containerClassName);\n\n    reflow();\n  }\n\n  function offsetElementStart(e: Event) {\n    if (!disabled) {\n      show();\n    }\n\n    e.stopPropagation();\n    const target = e.target as HTMLElement;\n\n    if (!target.matches('input')) {\n      e.preventDefault();\n    }\n  }\n\n  function initialize() {\n    applyOptions();\n    const inputStyle = window.getComputedStyle(boundElement);\n\n    originalInputContainer = html('<span class=\"sp-original-input-container\"></span>') as HTMLSpanElement;\n    ['margin'].forEach(function (cssProp: string) {\n      originalInputContainer.style[cssProp] = inputStyle[cssProp] || null;\n    });\n    // inline-flex by default, switching to flex if needed\n\n    if (inputStyle.display === 'block') {\n      originalInputContainer.style.display = 'flex';\n    }\n\n    if (shouldReplace) {\n      insertAfter(boundElement, replacer as Element);\n      boundElement.style.display = 'none';\n    } else if (type === 'text') {\n      addClass(originalInputContainer, 'sp-colorize-container');\n      addClass(boundElement, 'spectrum sp-colorize');\n      wrap(boundElement, originalInputContainer);\n    } else if (type === 'component') {\n      addClass(boundElement, 'spectrum');\n      wrap(boundElement, originalInputContainer);\n      const addOn = html(['<div class=\\'sp-colorize-container sp-add-on\\'>',\n        '<div class=\\'sp-colorize\\'></div> ',\n        '</div>'].join('')) as HTMLElement;\n\n      addOn.style.width = boundElement.offsetHeight + 'px';\n      addOn.style.borderRadius = inputStyle.borderRadius;\n      addOn.style.border = inputStyle.border;\n\n      boundElement.classList.add('with-add-on');\n\n      boundElement.before(addOn);\n    }\n\n    colorizeElement = boundElement.parentNode?.querySelector('.sp-colorize');\n    colorizeElementInitialColor = colorizeElement?.style.color || '';\n    colorizeElementInitialBackground = colorizeElement?.style.backgroundColor || '';\n\n    if (!allowEmpty) {\n      clearButton.style.display = 'none';\n    }\n\n    if (flat) {\n      boundElement.after(container);\n      boundElement.style.display = 'none';\n    } else {\n\n      let appendTo = opts.appendTo === 'parent' ? boundElement.parentElement : opts.appendTo;\n      if (!appendTo) {\n        appendTo = document.body;\n      }\n\n      if (typeof appendTo !== 'string') {\n        appendTo.append(container);\n      }\n    }\n\n    updateSelectionPaletteFromStorage();\n\n    offsetElement?.addEventListener('click', offsetElementStart);\n    offsetElement?.addEventListener('touchstart', offsetElementStart);\n\n    if (boundElement.matches(':disabled') || opts.disabled) {\n      disable();\n    }\n\n    // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n    container.addEventListener('click', (e) => e.stopPropagation());\n\n    // Handle user typed input\n    [textInput, boundElement].forEach(function (input: HTMLElement | HTMLInputElement) {\n      if (!('value' in input)) {\n        return;\n      }\n\n      input.addEventListener('change', () => {\n        setFromTextInput(input.value);\n      });\n      input.addEventListener('paste', () => {\n        setTimeout(() => {\n          setFromTextInput(input.value);\n        }, 1);\n      });\n      input.addEventListener('keydown', (e) => {\n        if (e.keyCode === 13) {\n          setFromTextInput(input.value);\n          if (input === boundElement) {\n            hide();\n          }\n        }\n      });\n    });\n\n    cancelButton.textContent = opts.cancelText;\n    cancelButton.addEventListener('click', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      revert();\n      hide();\n    });\n\n    clearButton.setAttribute('title', opts.clearText);\n    clearButton.addEventListener('click', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      isEmpty = true;\n      move();\n\n      if (flat) {\n        //for the flat style, this is a change event\n        updateOriginalInput(true);\n      }\n    });\n\n    chooseButton.textContent = opts.chooseText;\n    chooseButton.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      // if (IE && textInput.matches(':focus')) {\n      //   textInput.dispatchEvent(new CustomEvent('change'));\n      // }\n\n      if (isValid()) {\n        updateOriginalInput(true);\n        hide();\n      }\n    });\n\n    toggleButton.textContent = opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText;\n    toggleButton.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      opts.showPaletteOnly = !opts.showPaletteOnly;\n\n      // To make sure the Picker area is drawn on the right, next to the\n      // Palette area (and not below the palette), first move the Palette\n      // to the left to make space for the picker, plus 5px extra.\n      // The 'applyOptions' function puts the whole container back into place\n      // and takes care of the button-text and the sp-palette-only CSS class.\n      if (!opts.showPaletteOnly && !flat) {\n        container.style.left = '-=' + (outerWidthWithMargin(pickerContainer) + 5);\n      }\n      applyOptions();\n    });\n\n    draggable(alphaSlider, function (dragX, dragY, e) {\n      currentAlpha = (dragX / alphaWidth);\n      isEmpty = false;\n      if (e.shiftKey) {\n        currentAlpha = Math.round(currentAlpha * 10) / 10;\n      }\n\n      move();\n    }, dragStart, dragStop);\n\n    draggable(slider, function (dragX, dragY) {\n      currentHue = dragY / slideHeight;\n      isEmpty = false;\n      if (!opts.showAlpha) {\n        currentAlpha = 1;\n      }\n      move();\n    }, dragStart, dragStop);\n\n    draggable(dragger, function (dragX, dragY, e) {\n\n      // shift+drag should snap the movement to either the x or y axis.\n      if (!e.shiftKey) {\n        shiftMovementDirection = null;\n      } else if (!shiftMovementDirection) {\n        const oldDragX = currentSaturation * dragWidth;\n        const oldDragY = dragHeight - (currentValue * dragHeight);\n        const furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\n\n        shiftMovementDirection = furtherFromX ? 'x' : 'y';\n      }\n\n      const setSaturation = !shiftMovementDirection || shiftMovementDirection === 'x';\n      const setValue = !shiftMovementDirection || shiftMovementDirection === 'y';\n\n      if (setSaturation) {\n        currentSaturation = (dragX / dragWidth);\n      }\n      if (setValue) {\n        currentValue = ((dragHeight - dragY) / dragHeight);\n      }\n\n      isEmpty = false;\n      if (!opts.showAlpha) {\n        currentAlpha = 1;\n      }\n\n      move();\n\n    }, dragStart, dragStop);\n\n    if (!!initialColor) {\n      set(initialColor);\n\n      // In case color was black - update the preview UI and set the format\n      // since the set function will not run (default color is black).\n      updateUI();\n      currentPreferredFormat = tinycolor(initialColor).getFormat() as SpectrumColorFormat || opts.preferredFormat;\n      addColorToSelectionPalette(initialColor);\n    } else if (initialColor === '') {\n      set(initialColor);\n      updateUI();\n    } else {\n      updateUI();\n    }\n\n    if (flat) {\n      show();\n    }\n\n    function paletteElementClick(e: Event) {\n      // @ts-ignore\n      if (e.data && e.data.ignore) {\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\n        set(el?.dataset?.color || '');\n        move();\n      } else {\n        const el = (e.target as HTMLElement).closest('.sp-thumb-el') as HTMLElement | null;\n        set(el?.dataset?.color || '');\n        move();\n\n        // If the picker is going to close immediately, a palette selection\n        // is a change.  Otherwise, it's a move only.\n        if (opts.hideAfterPaletteSelect) {\n          updateOriginalInput(true);\n          hide();\n        } else {\n          updateOriginalInput();\n        }\n      }\n\n      return false;\n    }\n\n    const paletteEvents = ['click', 'touchstart'];\n\n    for (const paletteEvent of paletteEvents) {\n      eventDelegate(paletteContainer, paletteEvent, '.sp-thumb-el', paletteElementClick);\n      eventDelegate(initialColorContainer, paletteEvent, '.sp-thumb-el:nth-child(1)', paletteElementClick, { ignore: true });\n    }\n  }\n\n  function updateSelectionPaletteFromStorage() {\n    if (localStorageKey) {\n      // Migrate old palettes over to new format.  May want to remove this eventually.\n      try {\n        const localStorage = window.localStorage;\n        const oldPalette = localStorage[localStorageKey].split(',#');\n        if (oldPalette.length > 1) {\n          delete localStorage[localStorageKey];\n\n          for (const c of oldPalette) {\n            addColorToSelectionPalette(c);\n          }\n        }\n      } catch (e) {\n      }\n\n      try {\n        selectionPalette = window.localStorage[localStorageKey].split(';');\n      } catch (e) {\n      }\n    }\n  }\n\n  function addColorToSelectionPalette(color: ColorInput) {\n    if (showSelectionPalette) {\n      const rgb = tinycolor(color).toRgbString();\n\n      if (!paletteLookup[rgb] && !selectionPalette.includes(rgb)) {\n        selectionPalette.push(rgb);\n        while (selectionPalette.length > maxSelectionSize) {\n          selectionPalette.shift();\n        }\n      }\n\n      if (localStorageKey) {\n        try {\n          window.localStorage[localStorageKey] = selectionPalette.join(';');\n        } catch (e) {\n        }\n      }\n    }\n  }\n\n  function getUniqueSelectionPalette() {\n    var unique = [];\n    if (opts.showPalette) {\n      for (var i = 0; i < selectionPalette.length; i++) {\n        var rgb = tinycolor(selectionPalette[i]).toRgbString();\n\n        if (!paletteLookup[rgb]) {\n          unique.push(selectionPalette[i]);\n        }\n      }\n    }\n\n    return unique.reverse().slice(0, opts.maxSelectionSize);\n  }\n\n  function drawPalette() {\n\n    const currentColor = get();\n\n    const html = paletteArray.map((palette, i) => {\n      return paletteTemplate(palette, currentColor, 'sp-palette-row sp-palette-row-' + i, opts);\n    });\n\n    updateSelectionPaletteFromStorage();\n\n    if (selectionPalette) {\n      html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, 'sp-palette-row sp-palette-row-selection', opts));\n    }\n\n    paletteContainer.innerHTML = html.join('');\n  }\n\n  function drawInitial() {\n    if (opts.showInitial) {\n      const initial = colorOnShow;\n      const current = get();\n      initialColorContainer.innerHTML = paletteTemplate([initial, current], current, 'sp-palette-row-initial', opts);\n    }\n  }\n\n  function dragStart() {\n    if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n      reflow();\n    }\n    isDragging = true;\n    addClass(container, draggingClass);\n    shiftMovementDirection = null;\n\n    emit(boundElement, 'dragstart', { color: get() });\n  }\n\n  function dragStop() {\n    isDragging = false;\n    removeClass(container, draggingClass);\n    emit(boundElement, 'dragstop', { color: get() });\n  }\n\n  function setFromTextInput(value: string) {\n    if (abortNextInputChange) {\n      abortNextInputChange = false;\n      return;\n    }\n    if ((value === null || value === '') && allowEmpty) {\n      set('');\n      move();\n      updateOriginalInput();\n    } else {\n      const tiny = tinycolor(value);\n      if (tiny.isValid()) {\n        set(tiny);\n        move();\n        updateOriginalInput();\n      } else {\n        textInput.classList.add('sp-validation-error');\n      }\n    }\n  }\n\n  function toggle() {\n    if (visible) {\n      hide();\n    } else {\n      show();\n    }\n  }\n\n  function show() {\n    if (visible) {\n      reflow();\n      return;\n    }\n\n    const event = emit(boundElement, 'beforeShow', { color: get() });\n\n    if (callbacks.beforeShow(event) === false || event.defaultPrevented) {\n      return;\n    }\n\n    hideAll();\n    visible = true;\n\n    doc.addEventListener('keydown', onkeydown);\n    doc.addEventListener('click', clickout);\n    window.addEventListener('resize', resize);\n    replacer?.classList.add('sp-active');\n    container.classList.remove('sp-hidden');\n\n    reflow();\n    updateUI();\n\n    colorOnShow = get();\n\n    drawInitial();\n\n    const e = emit(boundElement, 'show', { color: colorOnShow });\n    callbacks.show(e);\n  }\n\n  function onkeydown(e: KeyboardEvent) {\n    // Close on ESC\n    if (e.keyCode === 27) {\n      hide();\n    }\n  }\n\n  function clickout(e: MouseEvent) {\n    // Return on right click.\n    if (e.button == 2) {\n      return;\n    }\n\n    // If a drag event was happening during the mouseup, don't hide\n    // on click.\n    if (isDragging) {\n      return;\n    }\n\n    if (clickoutFiresChange) {\n      updateOriginalInput(true);\n    } else {\n      revert();\n    }\n    hide();\n  }\n\n  function hide() {\n    // Return if hiding is unnecessary\n    if (!visible || flat) {\n      return;\n    }\n    visible = false;\n\n    doc.removeEventListener('keydown', onkeydown);\n    doc.removeEventListener('click', clickout);\n    window.removeEventListener('resize', resize);\n\n    replacer?.classList.remove('sp-active');\n    container.classList.add('sp-hidden');\n\n    const event = emit(boundElement, 'hide', { color: get() });\n    callbacks.hide(event);\n  }\n\n  function revert() {\n    set(colorOnShow, true);\n    updateOriginalInput(true);\n  }\n\n  function set(color: ColorInput, ignoreFormatChange: boolean = false) {\n    if (tinycolor.equals(color, get())) {\n      // Update UI just in case a validation error needs\n      // to be cleared.\n      updateUI();\n      return;\n    }\n\n    var newColor, newHsv;\n    if ((!color || color === undefined) && allowEmpty) {\n      isEmpty = true;\n    } else {\n      isEmpty = false;\n      newColor = tinycolor(color);\n      newHsv = newColor.toHsv();\n\n      currentHue = (newHsv.h % 360) / 360;\n      currentSaturation = newHsv.s;\n      currentValue = newHsv.v;\n      currentAlpha = newHsv.a;\n    }\n    updateUI();\n\n    if (newColor && newColor.isValid() && !ignoreFormatChange) {\n      currentPreferredFormat = opts.preferredFormat || newColor.getFormat() as SpectrumColorFormat;\n    }\n  }\n\n  function get(opts: any = {}): Instance | '' {\n    if (allowEmpty && isEmpty) {\n      return '';\n    }\n\n    return tinycolor.fromRatio({\n      h: currentHue,\n      s: currentSaturation,\n      v: currentValue,\n      a: Math.round(currentAlpha * 1000) / 1000,\n      // @ts-ignore\n    }, { format: opts.format || currentPreferredFormat });\n  }\n\n  function isValid() {\n    return !textInput.classList.contains('sp-validation-error');\n  }\n\n  function move() {\n    updateUI();\n\n    const event = emit(boundElement, 'move', { color: get() });\n    callbacks.move(event);\n  }\n\n  function updateUI() {\n\n    textInput.classList.remove('sp-validation-error');\n\n    updateHelperLocations();\n\n    // Update dragger background color (gradients take care of saturation and value).\n    const flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n    dragger.style.backgroundColor = flatColor.toHexString();\n\n    // Get a format that alpha will be included in (hex and names ignore alpha)\n    let format = currentPreferredFormat;\n    if (currentAlpha < 1 && !(currentAlpha === 0 && format === 'name')) {\n      if (format === 'hex' || format === 'hex3' || format === 'hex6' || format === 'name') {\n        format = 'rgb';\n      }\n    }\n\n    let realColor = get({ format }),\n      displayColor = '';\n\n    //reset background info for preview element\n    if (previewElement) {\n      previewElement.classList.remove('sp-clear-display');\n      previewElement.style.backgroundColor = 'transparent';\n    }\n\n    if (realColor === '') {\n      // Update the replaced elements background with icon indicating no color selection\n      previewElement?.classList.add('sp-clear-display');\n    } else {\n      const realHex = realColor.toHexString();\n      const realRgb = realColor.toRgbString();\n\n      if (previewElement) {\n        // Update the replaced elements background color (with actual selected color)\n        if (realColor.getAlpha() === 1) {\n          previewElement.style.backgroundColor = realRgb;\n        } else {\n          previewElement.style.backgroundColor = 'transparent';\n          previewElement.style.filter = realColor.toFilter();\n        }\n      }\n\n      if (opts.showAlpha) {\n        const rgb = realColor.toRgb();\n        rgb.a = 0;\n        const realAlpha = tinycolor(rgb).toRgbString();\n\n        alphaSliderInner.style.background = `linear-gradient(to right, ${realAlpha}, ${realHex})`;\n      }\n\n      displayColor = realColor.toString(format);\n    }\n\n    // Update the text entry input as it changes happen\n    if (opts.showInput) {\n      textInput.value = displayColor;\n    }\n    (boundElement as HTMLInputElement).value = displayColor;\n    if (opts.type == 'text' || opts.type == 'component') {\n      const color = realColor;\n      if (color && colorizeElement) {\n        const textColor = (color.isLight() || color.getAlpha() < 0.4) ? 'black' : 'white';\n        colorizeElement.style.backgroundColor = color.toRgbString();\n        colorizeElement.style.color = textColor;\n      } else if (colorizeElement) {\n        colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\n        colorizeElement.style.color = colorizeElementInitialColor;\n      }\n    }\n\n    if (opts.showPalette) {\n      drawPalette();\n    }\n\n    drawInitial();\n  }\n\n  function updateHelperLocations() {\n    if (allowEmpty && isEmpty) {\n      //if selected color is empty, hide the helpers\n      alphaSlideHelper.style.display = 'none';\n      slideHelper.style.display = 'none';\n      dragHelper.style.display = 'none';\n    } else {\n      //make sure helpers are visible\n      alphaSlideHelper.style.display = 'block';\n      slideHelper.style.display = 'block';\n      dragHelper.style.display = 'block';\n\n      // Where to show the little circle in that displays your current selected color\n      let dragX = currentSaturation * dragWidth;\n      let dragY = dragHeight - (currentValue * dragHeight);\n      dragX = Math.max(\n        -dragHelperHeight,\n        Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight),\n      );\n      dragY = Math.max(\n        -dragHelperHeight,\n        Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight),\n      );\n      dragHelper.style.top = dragY + 'px';\n      dragHelper.style.left = dragX + 'px';\n\n      const alphaX = currentAlpha * alphaWidth;\n      alphaSlideHelper.style.left = (alphaX - (alphaSlideHelperWidth / 2)) + 'px';\n\n      // Where to show the bar that displays your current selected hue\n      const slideY = (currentHue) * slideHeight;\n      slideHelper.style.top = (slideY - slideHelperHeight) + 'px';\n    }\n  }\n\n  function updateOriginalInput(fireCallback = false) {\n    let color = get(),\n      displayColor = '',\n      hasChanged = !tinycolor.equals(color, colorOnShow);\n\n    if (color) {\n      displayColor = color.toString(currentPreferredFormat);\n      // Update the selection palette with the current color\n      addColorToSelectionPalette(color);\n    }\n\n    if (fireCallback && hasChanged) {\n      // we trigger the change event or input, but the input change event is also binded\n      // to some spectrum processing, that we do no need\n      abortNextInputChange = true;\n      const event = emit(boundElement, 'change', { color });\n      callbacks.change(event);\n    }\n  }\n\n  function reflow() {\n    if (!visible) {\n      return; // Calculations would be useless and wouldn't be reliable anyways\n    }\n\n    dragWidth = dragger.getBoundingClientRect().width;\n    dragHeight = dragger.getBoundingClientRect().height;\n\n    dragHelperHeight = dragHelper.getBoundingClientRect().height;\n    slideWidth = slider.getBoundingClientRect().width;\n    slideHeight = slider.getBoundingClientRect().height;\n    slideHelperHeight = slideHelper.getBoundingClientRect().height;\n    alphaWidth = alphaSlider.getBoundingClientRect().width;\n    alphaSlideHelperWidth = alphaSlideHelper.getBoundingClientRect().width;\n\n    if (!flat) {\n      container.style.position = 'absolute';\n\n      if (opts.offset) {\n        setElementOffset(container, opts.offset);\n      } else {\n        setElementOffset(container, getOffset(container, offsetElement as HTMLElement));\n      }\n    }\n\n    updateHelperLocations();\n\n    if (opts.showPalette) {\n      drawPalette();\n    }\n\n    emit(boundElement, 'reflow');\n  }\n\n  function destroy() {\n    delete boundElement.style.display;\n    boundElement.classList.remove('spectrum', 'with-add-on', 'sp-colorize');\n    offsetElement.removeEventListener('click', offsetElementStart);\n    offsetElement.removeEventListener('touchstart', offsetElementStart);\n    container.remove();\n    replacer?.remove();\n    if (colorizeElement) {\n      colorizeElement.style.backgroundColor = colorizeElementInitialBackground;\n      colorizeElement.style.color = colorizeElementInitialColor;\n    }\n    const originalInputContainer = boundElement.closest('.sp-original-input-container');\n    if (originalInputContainer) {\n      originalInputContainer.after(boundElement);\n      originalInputContainer.remove();\n    }\n    spectrums[spect.id] = null;\n  }\n\n  function option(optionName: string | undefined = undefined, optionValue: any = undefined) {\n    if (optionName === undefined) {\n      return Object.assign({}, opts);\n    }\n    if (optionValue === undefined) {\n      return opts[optionName];\n    }\n\n    opts[optionName] = optionValue;\n\n    if (optionName === 'preferredFormat') {\n      currentPreferredFormat = opts.preferredFormat;\n    }\n    applyOptions();\n  }\n\n  function enable() {\n    disabled = false;\n    (boundElement as HTMLInputElement).disabled = false;\n    offsetElement.classList.remove('sp-disabled');\n  }\n\n  function disable() {\n    hide();\n    disabled = true;\n    (boundElement as HTMLInputElement).disabled = true;\n    offsetElement.classList.add('sp-disabled');\n  }\n\n  function setOffset(coord: OffsetCSSOptions) {\n    opts.offset = coord;\n    reflow();\n  }\n\n  initialize();\n\n  let spect = {\n    id: 0,\n    show: show,\n    hide: hide,\n    toggle: toggle,\n    reflow: reflow,\n    option: option,\n    enable: enable,\n    disable: disable,\n    offset: setOffset,\n    set: function (c: ColorInput) {\n      set(c);\n      updateOriginalInput();\n    },\n    get: get,\n    destroy: destroy,\n    container: container,\n  };\n\n  spect.id = spectrums.push(spect) - 1;\n\n  return spect;\n}\n\n/**\n * checkOffset - get the offset below/above and left/right element depending on screen position\n * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n */\nfunction getOffset(picker: HTMLElement, input: HTMLElement) {\n  const extraY = 0;\n  const dpWidth = picker.offsetWidth;\n  const dpHeight = picker.offsetHeight;\n  const inputHeight = input.offsetHeight;\n  const doc = picker.ownerDocument;\n  const docElem = doc.documentElement;\n  const viewWidth = docElem.clientWidth + window.pageXOffset;\n  const viewHeight = docElem.clientHeight + window.pageYOffset;\n  const offset = getElementOffset(input);\n  let offsetLeft = offset.left;\n  let offsetTop = offset.top;\n\n  offsetTop += inputHeight;\n\n  offsetLeft -=\n    Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\n      Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\n\n  offsetTop -=\n    Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\n      Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n  return {\n    top: offsetTop,\n    // bottom: offset.bottom,\n    left: offsetLeft,\n    // right: offset.right,\n    // width: offset.width,\n    // height: offset.height\n  };\n}\n\n/**\n * noop - do nothing\n */\nfunction noop() {\n\n}\n\n/**\n * Create a function bound to a given object\n * Thanks to underscore.js\n */\nfunction bind(func: Function, obj: object) {\n  const slice = Array.prototype.slice;\n  const args = slice.call(arguments, 2);\n  return function () {\n    return func.apply(obj, args.concat(slice.call(arguments)));\n  };\n}\n\n/**\n * Lightweight drag helper.  Handles containment within the element, so that\n * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n */\nfunction draggable(\n  element: HTMLElement,\n  onmove: (x: number, y: number, e: DragEvent) => void,\n  onstart: (x: number, y: number, e: DragEvent) => void,\n  onstop: (x: number, y: number, e: DragEvent) => void,\n) {\n  onmove = onmove || noop;\n  onstart = onstart || noop;\n  onstop = onstop || noop;\n  const doc = document;\n  let dragging = false;\n  let offset: OffsetCSSOptions = {};\n  let maxHeight = 0;\n  let maxWidth = 0;\n  const hasTouch = ('ontouchstart' in window);\n\n  const duringDragEvents: { [P in keyof ElementEventMap]?: Function; } = {};\n  duringDragEvents['selectstart'] = prevent;\n  duringDragEvents['dragstart'] = prevent;\n  duringDragEvents['touchmove'] = move;\n  duringDragEvents['mousemove'] = move;\n  duringDragEvents['touchend'] = stop;\n  duringDragEvents['mouseup'] = stop;\n\n  function prevent(e: Event) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    e.returnValue = false;\n  }\n\n  function move(e: TouchEvent | MouseEvent) {\n    if (dragging) {\n      const t0 = 'touches' in e && e.touches[0];\n      const pageX = t0 && t0.pageX || (e as MouseEvent).pageX;\n      const pageY = t0 && t0.pageY || (e as MouseEvent).pageY;\n\n      const dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n      const dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n      if (hasTouch) {\n        // Stop scrolling in iOS\n        prevent(e);\n      }\n\n      onmove.apply(element, [dragX, dragY, e]);\n    }\n  }\n\n  function start(e: TouchEvent | MouseEvent) {\n    const rightclick = (e.which) ? (e.which == 3) : ((e as MouseEvent).button === 2);\n\n    if (!rightclick && !dragging) {\n      if (onstart.apply(element, arguments) !== false) {\n        dragging = true;\n        maxHeight = element.getBoundingClientRect().height;\n        maxWidth = element.getBoundingClientRect().width;\n        offset = getElementOffset(element);\n\n        for (const eventName in duringDragEvents) {\n          doc.addEventListener(eventName, duringDragEvents[eventName]);\n        }\n\n        doc.body.classList.add('sp-dragging');\n\n        move(e);\n\n        prevent(e);\n      }\n    }\n  }\n\n  function stop() {\n    if (dragging) {\n      for (const eventName in duringDragEvents) {\n        doc.removeEventListener(eventName, duringDragEvents[eventName]);\n      }\n      doc.body.classList.remove('sp-dragging');\n\n      // Wait a tick before notifying observers to allow the click event\n      // to fire in Chrome.\n      setTimeout(function () {\n        onstop.apply(element, arguments);\n      }, 0);\n    }\n    dragging = false;\n  }\n\n  element.addEventListener('touchstart', start);\n  element.addEventListener('mousedown', start);\n}\n\nexport default class Spectrum {\n  private spectrum: any;\n  public ele: HTMLInputElement;\n  public options: Partial<SpectrumOptions>;\n  public eventListeners: { [event: string]: EventListener[] } = {};\n\n  static defaultOptions = defaultOpts;\n  static draggable = draggable;\n  static localization: { [locale: string]: SpectrumLang } = {};\n  static palette: string[][] = [];\n\n  static create(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum {\n    const ele = this.wrap(selector);\n\n    if (!ele) {\n      let msg = 'Unable to find element';\n\n      if (typeof selector === 'string') {\n        msg += ' - Selector: ' + selector;\n      }\n      throw Error(msg);\n    }\n\n    return new this(ele, options);\n  }\n\n  static createIfExists(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum|null {\n    const ele = this.wrap(selector);\n\n    if (!ele) {\n      return null;\n    }\n\n    return new this(ele, options);\n  }\n\n  static getInstance(selector: string | HTMLElement, options: Partial<SpectrumOptions> = {}): Spectrum {\n    const ele = this.wrap(selector);\n\n    // @ts-ignore\n    return ele.__spectrum = ele.__spectrum || this.createIfExists(ele, options);\n  }\n\n  static hasInstance(selector: string | HTMLElement) {\n    const ele = this.wrap(selector);\n\n    // @ts-ignore\n    return ele.__spectrum !== undefined;\n  }\n\n  static createMultiple(\n    selector: string | NodeListOf<HTMLElement>,\n    options: Partial<SpectrumOptions> = {}\n  ) {\n    const instances: Spectrum[] = [];\n\n    this.wrapList(selector).forEach((ele) => {\n      instances.push(this.create(ele, options));\n    });\n\n    return instances;\n  }\n\n  static getInstanceMultiple(\n    selector: string | JQuery | NodeListOf<HTMLElement>,\n    options: Partial<SpectrumOptions> = {},\n  ) {\n    const instances: Spectrum[] = [];\n\n    this.wrapList(selector).forEach((ele) => {\n      instances.push(this.getInstance(ele, options));\n    });\n\n    return instances;\n  }\n\n  private static wrap(selector: string | JQuery | HTMLElement) {\n    if (typeof selector === 'string') {\n      return document.querySelector<HTMLElement>(selector);\n    } else if ((selector as JQuery).jquery) {\n      return selector[0];\n    } else {\n      return selector;\n    }\n  }\n\n  private static wrapList(selector: string | JQuery | NodeListOf<HTMLElement>): Array<HTMLElement> {\n    if (typeof selector === 'string') {\n      return Array.from(document.querySelectorAll<HTMLElement>(selector));\n    } else if ((selector as JQuery).jquery) {\n      return (selector as JQuery).toArray();\n    } else {\n      return Array.from(selector);\n    }\n  }\n\n  static locale(locale: string, localization: SpectrumLang) {\n    this.localization[locale] = localization;\n    return this;\n  }\n\n  static registerJQuery($: JQueryStatic) {\n    registerJQueryPlugin($);\n  }\n\n  constructor(ele: HTMLInputElement, options: Partial<SpectrumOptions> = {}) {\n    this.spectrum = spectrum(ele, options);\n    this.ele = ele;\n    this.options = options;\n  }\n\n  get id(): number {\n    return this.spectrum.id;\n  }\n\n  get container(): HTMLElement {\n    // @ts-ignore\n    if (!this.ele.__spectrum) {\n      return this.ele;\n    }\n\n    return this.spectrum.container;\n  }\n\n  show() {\n    this.spectrum.show();\n    return this;\n  }\n\n  hide() {\n    this.spectrum.hide();\n    return this;\n  }\n\n  toggle() {\n    this.spectrum.toggle();\n    return this;\n  }\n\n  reflow() {\n    this.spectrum.reflow();\n    return this;\n  }\n\n  option(optionName: string | undefined = undefined, optionValue: any = undefined): any {\n    return this.spectrum.option(optionName, optionValue);\n  }\n\n  enable() {\n    this.spectrum.enable();\n    return this;\n  }\n\n  disable() {\n    this.spectrum.disable();\n    return this;\n  }\n\n  offset(coord: OffsetCSSOptions) {\n    this.spectrum.offset(coord);\n    return this;\n  }\n\n  set(color: ColorInput, ignoreFormatChange: boolean = false) {\n    this.spectrum.set(color, ignoreFormatChange);\n    return this;\n  }\n\n  get(): ColorInput {\n    return this.spectrum.get();\n  }\n\n  destroy() {\n    this.destroyInnerObject();\n    // @ts-ignore\n    delete this.ele.__spectrum;\n    return this;\n  }\n\n  rebuild(options?: Partial<SpectrumOptions>) {\n    this.destroyInnerObject();\n    if (options) {\n      this.options = Object.assign({}, this.options, options);\n    }\n    this.spectrum = spectrum(this.ele, this.options);\n    return this;\n  }\n\n  private destroyInnerObject() {\n    this.spectrum.destroy();\n    this.off();\n  }\n\n  listeners(eventName: string) {\n    return this.eventListeners[eventName] || [];\n  }\n\n  on(\n    eventName: string,\n    listener: SpectrumListener,\n    options: AddEventListenerOptions|undefined = undefined\n  ): Function {\n    this.ele.addEventListener(eventName, listener, options);\n\n    this.eventListeners[eventName] = this.eventListeners[eventName] || [];\n\n    this.eventListeners[eventName].push(listener);\n\n    return () => {\n      this.off(eventName, listener);\n    };\n  }\n\n  once(\n    eventName: string,\n    listener: SpectrumListener,\n    options: AddEventListenerOptions|undefined = undefined\n  ): Function {\n    const cancel = this.on(\n      eventName,\n      (e) => {\n        listener(e);\n\n        cancel();\n      },\n      options\n    );\n\n    return cancel;\n  }\n\n  off(eventName: string = undefined, listener: EventListener|SpectrumListener|undefined = undefined) {\n    if (eventName && !this.eventListeners[eventName]) {\n      return;\n    }\n\n    if (!eventName) {\n      this.eventListeners = {};\n      return;\n    }\n\n    if (listener) {\n      this.eventListeners[eventName] = this.eventListeners[eventName]\n        .filter((l) => l === listener);\n\n      this.ele.removeEventListener(eventName, listener);\n    } else {\n      for (const listener of this.eventListeners[eventName]) {\n        this.ele.removeEventListener(eventName, listener);\n      }\n\n      this.eventListeners[eventName] = [];\n    }\n  }\n}\n\n// @ts-ignore\nconst jQuery = window.jQuery;\n\nif (jQuery) {\n  registerJQueryPlugin(jQuery);\n}\n\nfunction registerJQueryPlugin($: any) {\n  // @ts-ignore\n  $.fn.spectrum = function (action: string | undefined | Partial<SpectrumOptions> = undefined, ...args) {\n    if (typeof action === \"string\") {\n      let returnValue = this;\n      this.each(function () {\n        const spect = this.__spectrum;\n\n        if (spect) {\n          const method = spect[action];\n\n          if (!method) {\n            throw new Error(\"Spectrum: no such method: '\" + action + \"'\");\n          }\n\n          if (action === \"get\") {\n            returnValue = spect.get();\n          } else if (action === \"container\") {\n            returnValue = $(spect.container);\n          } else if (action === \"option\") {\n            returnValue = spect.option.apply(spect, args);\n          } else if (action === \"destroy\") {\n            spect.destroy();\n          } else {\n            spect[action](...args);\n          }\n        }\n      });\n\n      return returnValue;\n    }\n\n    // Initializing a new instance of spectrum\n    return this.each(function () {\n      const options: SpectrumOptions = $.extend({}, $(this).data(), action);\n      // Infer default type from input params and deprecated options\n      if (!$(this).is('input')) {\n        options.type = 'color';\n      } else if (options.type == \"flat\") {\n        options.type = 'flat';\n      } else if ($(this).attr('type') == 'color') {\n        options.type = 'color';\n      } else {\n        options.type = options.type || 'component';\n      }\n\n      if (Spectrum.hasInstance(this)) {\n        const sp = Spectrum.getInstance(this);\n\n        sp.options = options;\n        sp.rebuild();\n      } else {\n        Spectrum.getInstance(this, options);\n      }\n    });\n  };\n\n  $.fn.spectrum.load = true;\n  $.fn.spectrum.loadOpts = {};\n  $.fn.spectrum.draggable = draggable;\n  $.fn.spectrum.defaults = defaultOpts;\n  $.fn.spectrum.localization = Spectrum.localization;\n  $.fn.spectrum.palette = [];\n\n  $.fn.spectrum.processNativeColorInputs = function () {\n    const colorInputs = $(\"input[type=color]\");\n    if (colorInputs.length) {\n      colorInputs.spectrum({\n        preferredFormat: \"hex6\"\n      });\n    }\n  };\n}\n"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","trimLeft","trimRight","tinycolor","color","opts","rgb","r","g","b","a","s","v","l","ok","format","replace","toLowerCase","match","named","names","matchers","exec","rgba","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","String","substr","convertToPercentage","i","Math","floor","f","p","q","t","mod","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","min","max","inputToRGB","_originalInput","_r","_g","_b","_a","_roundA","round","_format","_gradientType","gradientType","_ok","rgbToHsl","d","rgbToHsv","rgbToHex","allow3Char","hex","pad2","toString","charAt","join","rgbaToArgbHex","convertDecimalToHex","desaturate","amount","toHsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","polyad","number","isNaN","Error","result","step","push","splitcomplement","analogous","results","slices","part","ret","monochromatic","toHsv","modification","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","pow","setAlpha","value","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","fn","args","apply","concat","slice","arguments","_applyCombination","triad","tetrad","fromRatio","newColor","equals","color1","color2","random","mix","rgb1","rgb2","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","parms","level","size","toUpperCase","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","length","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flipped","flip","parseFloat","n","indexOf","isOnePointZero","processPercent","isPercentage","parseInt","abs","val","c","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","wrap","ele","wrapper","replaceWith","appendChild","html","doc","document","div","createElement","innerHTML","children","addClass","className","classes","split","filter","classList","add","removeClass","remove","toggleClass","state","undefined","toggle","emit","eventName","detail","event","CustomEvent","cancelable","bubbles","dispatchEvent","eventDelegate","selector","listener","payload","addEventListener","e","target","closest","data","assign","setElementOffset","elem","options","curPosition","curTop","curLeft","calculatePosition","position","style","curElem","props","curOffset","getElementOffset","curCSSTop","top","curCSSLeft","left","el","getBoundingClientRect","marginTop","marginLeft","getComputedStyle","getElementPosition","using","k","box","docElem","documentElement","window","pageYOffset","clientTop","pageXOffset","clientLeft","defaultOpts","beforeShow","noop","move","change","show","hide","type","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","locale","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","disabled","offset","spectrums","replaceInput","markup","paletteTemplate","current","tiny","swatchStyle","spectrum","element","navigator","language","parts","map","Spectrum","localization","dataset","callbacks","bind","instanceOptions","flat","resize","func","wait","timeout","debounce","context","throttler","clearTimeout","setTimeout","throttle","reflow","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","slideWidth","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","draggingClass","abortNextInputChange","shiftMovementDirection","ownerDocument","container","body","originalInputContainer","colorizeElement","colorizeElementInitialColor","colorizeElementInitialBackground","boundElement","pickerContainer","querySelector","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","nodeName","isInputTypeColor","getAttribute","shouldReplace","replacer","offsetElement","previewElement","initialColor","colorOnShow","currentPreferredFormat","isEmpty","thisId","applyOptions","textContent","Array","isArray","j","keys","offsetElementStart","stopPropagation","matches","preventDefault","updateSelectionPaletteFromStorage","localStorage","oldPalette","addColorToSelectionPalette","includes","shift","drawPalette","currentColor","unique","reverse","getUniqueSelectionPalette","drawInitial","initial","dragStart","dragStop","setFromTextInput","set","updateOriginalInput","defaultPrevented","hideAll","onkeydown","clickout","updateUI","keyCode","button","revert","removeEventListener","ignoreFormatChange","newHsv","updateHelperLocations","flatColor","backgroundColor","realColor","displayColor","realHex","realRgb","realAlpha","background","textColor","display","dragX","dragY","alphaX","slideY","fireCallback","hasChanged","width","height","picker","input","dpWidth","offsetWidth","dpHeight","offsetHeight","inputHeight","viewWidth","clientWidth","viewHeight","clientHeight","offsetLeft","offsetTop","getOffset","disable","querySelectorAll","forEach","label","inputStyle","cssProp","existingNode","newNode","parentNode","insertBefore","nextSibling","insertAfter","addOn","borderRadius","border","before","after","parentElement","append","paletteElementClick","ignore","setAttribute","contains","marginRight","outerWidthWithMargin","draggable","shiftKey","oldDragX","oldDragY","furtherFromX","paletteEvents","paletteEvent","initialize","spect","id","option","optionName","optionValue","enable","coord","destroy","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","returnValue","t0","touches","pageX","pageY","start","rightclick","which","stop","static","msg","__spectrum","createIfExists","instances","wrapList","create","getInstance","jquery","from","toArray","$","registerJQueryPlugin","constructor","eventListeners","destroyInnerObject","rebuild","off","listeners","on","once","cancel","jQuery","action","each","extend","is","attr","hasInstance","sp","load","loadOpts","defaults","processNativeColorInputs","colorInputs"],"sourceRoot":""}